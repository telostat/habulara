# Habulara - Toolkit for Processing Tabular Data

![GitHub release (latest by date)](https://img.shields.io/github/v/release/telostat/habulara)
![GitHub contributors](https://img.shields.io/github/contributors/telostat/habulara)
![GitHub](https://img.shields.io/github/license/telostat/habulara)

> **Note:** This package is under heavy development and of prototype
> quality at the moment. Expect significant performance regressions
> across releases and breaking changes without notification until we
> reach the first major version.

Habulara is a Haskell library and command line application that
provides high-level means to process tabular data, in particular CSV
files in a declarative fashion.

## Installation

```
git clone git@github.com:telostat/habulara.git
cd habulara
stack install
```

## Usage

### As a standalone application

To process a CSV file as per a given HAB (Habulara mapping
specification) file:

```
$ habulara process --help
Usage: habulara process --spec SPEC [--input INPUT] [--output OUTPUT]
  Process given CSV data with given specification

Available options:
  --spec SPEC              Habulara mapper specification filepath
  --input INPUT            Input CSV data filepath (`-` for stdin, default)
  --output OUTPUT          Output CSV data filepath (`-` for stdout, default)
  -h,--help                Show this help text
```

... example:

```
habulara process --spec var/examples/weather-stations/spec.yaml --input var/examples/weather-stations/data.csv
```

### As a library

> **TODO:** Add a quick example for demonstrating library usage.

## License

Copyright Telostat Pte Ltd (c) 2020-2021.

This work is licensed under BSD3. Please check the license file
included in the source-code.

## Development

### Releasing

```
git checkout main
git merge --no-ff develop
export TAG_IN_RELEASE="0.0.0.3"
git-chglog --next-tag "${TAG_IN_RELEASE}" -o ChangeLog.md
git commit -am "chore(release): ${TAG_IN_RELEASE}"
git tag -a -m "Release ${TAG_IN_RELEASE}" "${TAG_IN_RELEASE}"
git push --follow-tags origin main
```

Then, create a new release on GitHub and upload the `.tar.gz` and `habulara-Linux-x86_64` files generated by:

```
stack sdist
stack install
cp "$(which habulara)" habulara-Linux-x86_64
upx habulara-Linux-x86_64
```

Finally, checkout to develop and bump the version:

```
git checkout develop
git rebase main
export TAG_IN_DEVELOPMENT="0.0.0.4"
## Edit package.yaml and then:
git commit -am "chore: bump development version to ${TAG_IN_DEVELOPMENT}"
git push
```
